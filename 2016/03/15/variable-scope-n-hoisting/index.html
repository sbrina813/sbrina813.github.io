<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>JavaScript Variable Scope and Hoisting | Sabrina&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Extract from javascriptissexy
##Variable Scope
Definition: A variable’s scope is the context in which the variable exists. The scope specifies from where you can access a variable and whether you have">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript Variable Scope and Hoisting">
<meta property="og:url" content="http://yoursite.com/2016/03/15/variable-scope-n-hoisting/index.html">
<meta property="og:site_name" content="Sabrina's Blog">
<meta property="og:description" content="Extract from javascriptissexy
##Variable Scope
Definition: A variable’s scope is the context in which the variable exists. The scope specifies from where you can access a variable and whether you have">
<meta property="og:updated_time" content="2016-03-16T05:36:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript Variable Scope and Hoisting">
<meta name="twitter:description" content="Extract from javascriptissexy
##Variable Scope
Definition: A variable’s scope is the context in which the variable exists. The scope specifies from where you can access a variable and whether you have">
  
    <link rel="alternative" href="/atom.xml" title="Sabrina&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Sabrina Jiang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">可知 红颜弹指老，刹那芳华？</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/sbrina813" title="github">github</a>
					        
								<a class="mail" target="_blank" href="mailto:sabrina.jiang813@gmail.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/sabrinajiang" title="linkedin">linkedin</a>
					        
								<a class="Website" target="_blank" href="http://sabrinajiang.com/" title="Website">Website</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/angularjs/" style="font-size: 10px;">angularjs</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Sabrina Jiang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Sabrina Jiang</h1>
			</hgroup>
			
			<p class="header-subtitle">可知 红颜弹指老，刹那芳华？</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/sbrina813" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto:sabrina.jiang813@gmail.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/sabrinajiang" title="linkedin">linkedin</a>
			        
						<a class="Website" target="_blank" href="http://sabrinajiang.com/" title="Website">Website</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-variable-scope-n-hoisting" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/03/15/variable-scope-n-hoisting/" class="article-date">
  	<time datetime="2016-03-16T05:19:43.000Z" itemprop="datePublished">2016-03-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript Variable Scope and Hoisting
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/" target="_blank" rel="external">Extract from javascriptissexy</a></p>
<p>##Variable Scope</p>
<p><strong>Definition:</strong> A variable’s scope is the context in which the variable exists. The scope specifies from where you can access a variable and whether you have access to the variable in that context.<br>Variables have either a <strong>local scope</strong> or a <strong>global scope</strong>.</p>
<p><strong>Local Variables (Function-level scope)</strong><br>Variables declared within a function are local variables and are only accessible within that function or by functions inside that function.</p>
<ul>
<li><p><strong>No Block-Level Scope</strong>(variables scoped to surrounding curly brackets) example: variable in function without “var” is to be a global variable. </p>
</li>
<li><p><strong>Local Variables Have Priority Over Global Variables in Functions</strong><br>If you declare a global variable and a local variable with the same name, the local variable will have priority when you attempt to use the variable inside a function (local scope)</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"Paul"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">users</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Here, the name variable is local and it takes precedence over the same name variable in the global scope​</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Jack"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The search for name starts right here inside the function before it attempts to look outside the function in the global scope​</span></span><br><span class="line"><span class="built_in">console</span>.log (name); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">users (); <span class="comment">// Jack</span></span><br></pre></td></tr></table></figure>
<p><strong>Global Variables</strong><br>All variables declared outside a function are in the global scope. In the browser, which is what we are concerned with as front-end developers, the global context or scope is the window object (or the entire HTML document).</p>
<ul>
<li>If a variable is initialized (assigned a value) without first being declared with the var keyword, it is automatically added to the global context and it is thus a global variable</li>
</ul>
<p>Pay attention to i: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log (i); <span class="comment">// outputs 1, 2, 3, 4, 5, 6, 7, 8, 9, 10;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The variable i is a global variable and it is accessible in the following function with the last value it was assigned above ​</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aNumber</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The variable i in the aNumber function below is the global variable i that was changed in the for loop above. Its last value was 11, set just before the for loop exited:</span></span><br><span class="line">aNumber ();  <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>setTimeout</strong> Variables are Executed in the Global Scope<br>Note that all functions in setTimeout are executed in the global scope. This is a tricky bit; consider this:</li>
</ul>
<p>// The use of the “this” object inside the setTimeout function refers to the Window object, not to myObj​</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">var</span> highValue = <span class="number">200</span>;</span><br><span class="line">	<span class="keyword">var</span> constantVal = <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">var</span> myObj = &#123;</span><br><span class="line">		highValue: <span class="number">20</span>,</span><br><span class="line">		constantVal: <span class="number">5</span>,</span><br><span class="line">		calculateIt: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	 setTimeout (<span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.constantVal * <span class="keyword">this</span>.highValue);</span><br><span class="line">	&#125;, <span class="number">2000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// The "this" object in the setTimeout function used the global highValue and constantVal variables, because the reference to "this" in the setTimeout function refers to the global window object, not to the myObj object as we might expect.​</span></span><br><span class="line"></span><br><span class="line">	myObj.calculateIt(); <span class="comment">// 400</span></span><br><span class="line">	<span class="comment">// This is an important point to remember.</span></span><br><span class="line"></span><br><span class="line">**Do not Pollute the Global Scope**</span><br><span class="line">you have to know that it is important to avoid creating many variables <span class="keyword">in</span> the global scope, such <span class="keyword">as</span> <span class="keyword">this</span>:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// These two variables are in the global scope and they shouldn't be here</span></span><br><span class="line">	<span class="keyword">var</span> firstName, lastName;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fullName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log (<span class="string">"Full Name: "</span> + firstName + <span class="string">" "</span> + lastName );</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">This is the improved code and the proper way to avoid polluting the global scope</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Declare the variables inside the function where they are local variables</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fullName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> firstName = <span class="string">"Michael"</span>, lastName = <span class="string">"Jackson"</span>;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">console</span>.log (<span class="string">"Full Name: "</span> + firstName + <span class="string">" "</span> + lastName );</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Variable Hoisting</strong><br><em>All variable declarations are hoisted (lifted and declared) to the top of the function</em>, if defined in a function, or the top of the global context, if outside a function.</p>
<p>It is important to know that only variable declarations are hoisted to the top, <strong>not variable initialization or assignments</strong> (when the variable is assigned a value).</p>
<p>Variable Hoisting Example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log (<span class="string">"First Name: "</span> + name);</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Ford"</span>;</span><br><span class="line"><span class="built_in">console</span>.log (<span class="string">"Last Name: "</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">showName (); </span><br><span class="line"><span class="comment">// First Name: undefined</span></span><br><span class="line"><span class="comment">// Last Name: Ford</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The reason undefined prints first is because the local variable name was hoisted to the top of the function​</span></span><br><span class="line"><span class="comment">// Which means it is this local variable that get calls the first time.</span></span><br><span class="line"><span class="comment">// This is how the code is actually processed by the JavaScript engine:</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> name; <span class="comment">// name is hoisted (note that is undefined at this point, since the assignment happens below)</span></span><br><span class="line"><span class="built_in">console</span>.log (<span class="string">"First Name: "</span> + name); <span class="comment">// First Name: undefined</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">"Ford"</span>; <span class="comment">// name is assigned a value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// now name is Ford</span></span><br><span class="line"><span class="built_in">console</span>.log (<span class="string">"Last Name: "</span> + name); <span class="comment">// Last Name: Ford</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Function Declaration Overrides Variable Declaration When Hoisted</strong><br><code>Both function declaration and variable declarations are hoisted to the top of the containing scope.</code> And <code>function declaration takes precedence over variable declarations (but not over variable assignment).</code> As is noted above, variable assignment is not hoisted, and neither is function assignment. As a reminder, this is a function assignment: var myFunction = function () {}.<br>Here is a basic example to demonstrate:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// Both the variable and the function are named myName</span></span><br><span class="line">	<span class="keyword">var</span> myName;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">myName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log (<span class="string">"Rich"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// The function declaration overrides the variable name</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> myName); <span class="comment">// function</span></span><br><span class="line">------</span><br><span class="line">	 <span class="comment">// But in this example, the variable assignment overrides the function declaration</span></span><br><span class="line">	<span class="keyword">var</span> myName = <span class="string">"Richard"</span>; <span class="comment">// This is the variable assignment (initialization) that overrides the function declaration.</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">myName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log (<span class="string">"Rich"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> myName); <span class="comment">// string </span></span><br><span class="line"></span><br><span class="line">It is important to note that <span class="string">`function expressions`</span>, such <span class="keyword">as</span> the example below, <span class="string">`are not hoisted`</span>.</span><br><span class="line"></span><br><span class="line">	var myName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log (<span class="string">"Rich"</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>In <code>strict mode</code>, an error will occur if you assign a variable a value without first declaring the variable. Always declare your variables.</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/03/15/new-features-in-ES6/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          New features in ES6
        
      </div>
    </a>
  
  
    <a href="/2016/03/15/node-interview/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Node interview questions</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Sabrina Jiang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-65874278-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>