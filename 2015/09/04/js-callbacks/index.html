<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Understand JavaScript Callback Functions and Use Them | Sabrina&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Learn JavaScript Higher-order Functions, aka Callback Functions by Richard Bovell
In JavaScript, functions are first-class objects; that is, functions are of the type Object and they can be used in a">
<meta property="og:type" content="article">
<meta property="og:title" content="Understand JavaScript Callback Functions and Use Them">
<meta property="og:url" content="http://yoursite.com/2015/09/04/js-callbacks/index.html">
<meta property="og:site_name" content="Sabrina's Blog">
<meta property="og:description" content="Learn JavaScript Higher-order Functions, aka Callback Functions by Richard Bovell
In JavaScript, functions are first-class objects; that is, functions are of the type Object and they can be used in a">
<meta property="og:updated_time" content="2016-03-20T22:30:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Understand JavaScript Callback Functions and Use Them">
<meta name="twitter:description" content="Learn JavaScript Higher-order Functions, aka Callback Functions by Richard Bovell
In JavaScript, functions are first-class objects; that is, functions are of the type Object and they can be used in a">
  
    <link rel="alternative" href="/atom.xml" title="Sabrina&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Sabrina Jiang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">红颜弹指老，刹那芳华</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/sbrina813" title="github">github</a>
					        
								<a class="mail" target="_blank" href="mailto:sabrina.jiang813@gmail.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/sabrinajiang" title="linkedin">linkedin</a>
					        
								<a class="Website" target="_blank" href="http://sabrinajiang.com/" title="Website">Website</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/angularjs/" style="font-size: 10px;">angularjs</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/tool/" style="font-size: 10px;">tool</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Sabrina Jiang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Sabrina Jiang</h1>
			</hgroup>
			
			<p class="header-subtitle">红颜弹指老，刹那芳华</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/sbrina813" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto:sabrina.jiang813@gmail.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="https://www.linkedin.com/in/sabrinajiang" title="linkedin">linkedin</a>
			        
						<a class="Website" target="_blank" href="http://sabrinajiang.com/" title="Website">Website</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-js-callbacks" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/04/js-callbacks/" class="article-date">
  	<time datetime="2015-09-04T07:00:00.000Z" itemprop="datePublished">2015-09-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Understand JavaScript Callback Functions and Use Them
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://javascriptissexy.com/understand-javascript-callback-functions-and-use-them/" target="_blank" rel="external">Learn JavaScript Higher-order Functions, aka Callback Functions by Richard Bovell</a></p>
<p>In JavaScript, functions are first-class objects; that is, functions are of the type Object and they can be used in a first-class manner like any other object (String, Array, Number, etc.) since they are in fact objects themselves. They can be “stored in variables, passed as arguments to functions, created within functions, and returned from functions”</p>
<blockquote>
<p>Because functions are first-class objects, we can pass a function as<br>an argument in another function and later execute that passed-in<br>function or even return it to be executed later. This is the essence<br>of using callback functions in JavaScript.</p>
</blockquote>
<p>In the rest of this article we will learn everything about JavaScript callback functions. Callback functions are probably the most widely used functional programming technique in JavaScript, and you can find them in just about every piece of JavaScript and jQuery code, yet they remain mysterious to many JavaScript developers. The mystery will be no more, by the time you finish reading this article. </p>
<p><strong>Callback functions are derived from a programming paradigm known as functional programming. At a fundamental level, functional programming specifies the use of functions as arguments.</strong> Functional programming was—and still is, though to a much lesser extent today—seen as an esoteric technique of specially trained, master programmers.</p>
<p>Fortunately, the techniques of functional programming have been elucidated so that mere mortals like you and me can understand and use them with ease. One of the chief techniques in functional programming happens to be callback functions. As you will read shortly, implementing callback functions is as easy as passing regular variables as arguments. This technique is so simple that I wonder why it is mostly covered in advanced JavaScript topics.</p>
<p><strong>What is a Callback or Higher-order Function?</strong></p>
<p>A callback function, also known as a higher-order function, is a function that is passed to another function (let’s call this other function “otherFunction”) as a parameter, and the callback function is called (or executed) inside the otherFunction. A callback function is essentially a pattern (an established solution to a common problem), and therefore, the use of a callback function is also known as a callback pattern.</p>
<p>Consider this common use of a callback function in jQuery:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Note that the item in the click method's parameter is a function, not a variable.​</span></span><br><span class="line"><span class="comment">//The item is a callback function</span></span><br><span class="line">$(<span class="string">"#btn_1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"Btn 1 Clicked"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>As you see in the preceding example, we pass a function as a parameter to the click method. And the click method will call (or execute) the callback function we passed to it. This example illustrates a typical use of callback functions in JavaScript, and one widely used in jQuery.</p>
<p>Ruminate on this other classic example of callback functions in basic JavaScript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> friends = [<span class="string">"Mike"</span>, <span class="string">"Stacy"</span>, <span class="string">"Andy"</span>, <span class="string">"Rick"</span>];</span><br><span class="line">friends.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">eachName, index</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(index + <span class="number">1</span> + <span class="string">". "</span> + eachName); <span class="comment">// 1. Mike, 2. Stacy, 3. Andy, 4. Rick​</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Again, note the way we pass an anonymous function (a function without a name) to the forEach method as a parameter.</p>
<p><strong>So far we have passed anonymous functions as a parameter to other functions or methods.</strong> Lets now understand how callbacks work before we look at more concrete examples and start making our own callback functions.</p>
<p><strong>How Callback Functions Work?</strong><br>We can pass functions around like variables and return them in functions and use them in other functions. </p>
<p><strong>When we pass a callback function as an argument to another function, we are only passing the function definition. We are not executing the function in the parameter. In other words, we aren’t passing the function with the trailing pair of executing parenthesis () like we do when we are executing a function.</strong></p>
<p>And since the containing function has the callback function in its parameter as a function definition, it can execute the callback anytime.</p>
<p><strong>Note that the callback function is not executed immediately.</strong> It is “called back” (hence the name) at some specified point inside the containing function’s body. So, even though the first jQuery example looked like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The anonymous function is not being executed there in the parameter. </span></span><br><span class="line"><span class="comment">//The item is a callback function</span></span><br><span class="line">$(<span class="string">"#btn_1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"Btn 1 Clicked"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>the anonymous function will be called later inside the function body. <em>Even without a name, it can still be accessed later via the arguments object by the containing function.</em></p>
<p><strong>Callback Functions Are Closures</strong><br><em>When we pass a callback function as an argument to another function, the callback is executed at some point inside the containing function’s body just as if the callback were defined in the containing function.</em> This means the callback is a closure. Read my post, Understand JavaScript Closures With Ease for more on closures. As we know, <strong>closures have access to the containing function’s scope, so the callback function can access the containing functions’ variables, and even the variables from the global scope.</strong></p>
<p><strong>Basic Principles when Implementing Callback Functions</strong></p>
<p>While uncomplicated, callback functions have a few noteworthy principles we should be familiar with when implementing them.</p>
<p><strong>Use Named OR Anonymous Functions as Callbacks</strong><br>In the earlier jQuery and forEach examples, we used anonymous functions that were defined in the parameter of the containing function. That is one of the common patterns for using callback functions. Another popular pattern is to declare a named function and pass the name of that function to the parameter. Consider this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// global variable​</span></span><br><span class="line">​<span class="keyword">var</span> allUserData = [];</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// generic logStuff function that prints to console​</span></span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">logStuff</span> (<span class="params">userData</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> ( <span class="keyword">typeof</span> userData === <span class="string">"string"</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(userData);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> ( <span class="keyword">typeof</span> userData === <span class="string">"object"</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> userData) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(item + <span class="string">": "</span> + userData[item]);</span><br><span class="line">		&#125;</span><br><span class="line">​</span><br><span class="line">	&#125;</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// A function that takes two parameters, the last one a callback function​</span></span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">getInput</span> (<span class="params">options, callback</span>) </span>&#123;</span><br><span class="line">	allUserData.push (options);</span><br><span class="line">	callback (options);</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// When we call the getInput function, we pass logStuff as a parameter.​</span></span><br><span class="line">​<span class="comment">// So logStuff will be the function that will called back (or executed) inside the getInput function​</span></span><br><span class="line">getInput (&#123;name:<span class="string">"Rich"</span>, speciality:<span class="string">"JavaScript"</span>&#125;, logStuff);</span><br><span class="line">​<span class="comment">//  name: Rich​</span></span><br><span class="line">​<span class="comment">// speciality: JavaScript</span></span><br></pre></td></tr></table></figure>
<p><strong>Pass Parameters to Callback Functions</strong><br>Since the callback function is just a normal function when it is executed, we can pass parameters to it. We can pass any of the containing function’s properties (or global properties) as parameters to the callback function. In the preceding example, we pass options as a parameter to the callback function. Let’s pass a global variable and a local variable:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Global variable​</span></span><br><span class="line">​<span class="keyword">var</span> generalLastName = <span class="string">"Clinton"</span>;</span><br><span class="line">​</span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">getInput</span> (<span class="params">options, callback</span>) </span>&#123;</span><br><span class="line">	allUserData.push (options);</span><br><span class="line">​<span class="comment">// Pass the global variable generalLastName to the callback function​</span></span><br><span class="line">	callback (generalLastName, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Make Sure Callback is a Function Before Executing It</strong><br>It is always wise to check that the callback function passed in the parameter is indeed a function before calling it. Also, it is good practice to make the callback function optional.</p>
<p>Let’s <strong>refactor</strong> the getInput function from the previous example to ensure these checks are in place.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInput</span>(<span class="params">options, callback</span>) </span>&#123;</span><br><span class="line">	allUserData.push(options);</span><br><span class="line">​</span><br><span class="line">	<span class="comment">// Make sure the callback is a function​</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">"function"</span>) &#123;</span><br><span class="line">	<span class="comment">// Call it, since we have confirmed it is callable​</span></span><br><span class="line">		callback(options);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Without the check in place, if the getInput function is called either without the callback function as a parameter or in place of a function a non-function is passed, our code will result in a runtime error.</p>
<p><strong>Problem When Using Methods With The this Object as Callbacks</strong></p>
<p>When the callback function is a method that uses the this object, we have to modify how we execute the callback function to preserve the this object context. Or else the this object will either point to the global window object (in the browser), if callback was passed to a global function. Or it will point to the object of the containing method.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define an object with some properties and a method​</span></span><br><span class="line">​<span class="comment">// We will later pass the method as a callback function to another function​</span></span><br><span class="line">​<span class="keyword">var</span> clientData = &#123;</span><br><span class="line">	id: <span class="number">094545</span>,</span><br><span class="line">	fullName: <span class="string">"Not Set"</span>,</span><br><span class="line">	<span class="comment">// setUserName is a method on the clientData object​</span></span><br><span class="line">	setUserName: <span class="function"><span class="keyword">function</span> (<span class="params">firstName, lastName</span>)  </span>&#123;</span><br><span class="line">		<span class="comment">// this refers to the fullName property in this object​</span></span><br><span class="line">	  <span class="keyword">this</span>.fullName = firstName + <span class="string">" "</span> + lastName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">getUserInput</span>(<span class="params">firstName, lastName, callback</span>)  </span>&#123;</span><br><span class="line">	<span class="comment">// Do other stuff to validate firstName/lastName here​</span></span><br><span class="line">​</span><br><span class="line">	<span class="comment">// Now save the names​</span></span><br><span class="line">	callback (firstName, lastName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>In the following code example, when clientData.setUserName is executed, this.fullName will not set the fullName property on the clientData object. Instead, it will set fullName on the window object, since getUserInput is a global function. This happens because the this object in the global function points to the window object.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getUserInput (<span class="string">"Barack"</span>, <span class="string">"Obama"</span>, clientData.setUserName);</span><br><span class="line">​</span><br><span class="line"><span class="built_in">console</span>.log (clientData.fullName);<span class="comment">// Not Set​</span></span><br><span class="line">​</span><br><span class="line">​<span class="comment">// The fullName property was initialized on the window object​</span></span><br><span class="line"><span class="built_in">console</span>.log (<span class="built_in">window</span>.fullName); <span class="comment">// Barack Obama</span></span><br></pre></td></tr></table></figure>
<p><strong>Use the Call or Apply Function To Preserve this</strong><br>We can fix the preceding problem <strong>by using the Call or Apply function</strong> (we will discuss these in a full blog post later). For now, know that every function in JavaScript has two methods: Call and Apply. And these methods are used to set the this object inside the function and to pass arguments to the functions.</p>
<p><strong>Call</strong> takes the value to be used <strong>as the this object</strong> inside the function as the <strong>first parameter</strong>, and the <strong>remaining arguments</strong> to be passed to the function are <strong>passed individually</strong> (<strong>separated by commas</strong> of course). The <strong>Apply</strong> function’s <strong>first parameter</strong> is also the value to be used as the <strong>this object</strong> inside the function, while the <strong>last parameter</strong> is an <strong>array of values</strong> (or the arguments object) to pass to the function.</p>
<p>This sounds complex, but lets see how easy it is to use Apply or Call. To fix the problem in the previous example, we will use the Apply function thus:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Note that we have added an extra parameter for the callback object, called "callbackObj"​</span></span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">getUserInput</span>(<span class="params">firstName, lastName, callback, callbackObj</span>)  </span>&#123;</span><br><span class="line">	<span class="comment">// Do other stuff to validate name here​</span></span><br><span class="line">​</span><br><span class="line">	<span class="comment">// The use of the Apply function below will set the this object to be callbackObj​</span></span><br><span class="line">	callback.apply (callbackObj, [firstName, lastName]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>With the <strong>Apply</strong> function setting the this object correctly, we can now correctly execute the callback and have it set the fullName property correctly on the clientData object:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// We pass the clientData.setUserName method and the clientData object as parameters. The clientData object will be used by the Apply function to set the this object​</span></span><br><span class="line"> getUserInput (<span class="string">"Barack"</span>, <span class="string">"Obama"</span>, clientData.setUserName, clientData);</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// the fullName property on the clientData was correctly set​</span></span><br><span class="line"><span class="built_in">console</span>.log (clientData.fullName); <span class="comment">// Barack Obama</span></span><br></pre></td></tr></table></figure>
<p>We would have also used the Call function, but in this case we used the Apply function.</p>
<p><strong>Multiple Callback Functions Allowed</strong><br>We can pass more than one callback functions into the parameter of a function, just like we can pass more than one variable. Here is a classic example with jQuery’s AJAX function:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">successCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Do stuff before send​</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">successCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Do stuff if success message received​</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">completeCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Do stuff upon completion​</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">errorCallback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// Do stuff if error received​</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">	url:<span class="string">"http://fiddle.jshell.net/favicon.png"</span>,</span><br><span class="line">	success:successCallback,</span><br><span class="line">	complete:completeCallback,</span><br><span class="line">	error:errorCallback</span><br><span class="line">​</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>“Callback Hell” Problem And Solution</strong></p>
<p>In asynchronous code execution, which is simply execution of code in any order, sometimes it is common to have numerous levels of callback functions to the extent that you have code that looks like the following. <strong>The messy code below is called callback hell because of the difficulty of following the code due to the many callbacks.</strong> I took this example from the node-mongodb-native, a MongoDB driver for Node.js. [2]. The example code below is just for demonstration:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p_client = <span class="keyword">new</span> Db(<span class="string">'integration_tests_20'</span>, <span class="keyword">new</span> Server(<span class="string">"127.0.0.1"</span>, <span class="number">27017</span>, &#123;&#125;), &#123;<span class="string">'pk'</span>:CustomPKFactory&#125;);</span><br><span class="line">p_client.open(<span class="function"><span class="keyword">function</span>(<span class="params">err, p_client</span>) </span>&#123;</span><br><span class="line">	p_client.dropDatabase(<span class="function"><span class="keyword">function</span>(<span class="params">err, done</span>) </span>&#123;</span><br><span class="line">		p_client.createCollection(<span class="string">'test_custom_key'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, collection</span>) </span>&#123;</span><br><span class="line">			collection.insert(&#123;<span class="string">'a'</span>:<span class="number">1</span>&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, docs</span>) </span>&#123;</span><br><span class="line">				collection.find(&#123;<span class="string">'_id'</span>:<span class="keyword">new</span> ObjectID(<span class="string">"aaaaaaaaaaaa"</span>)&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, cursor</span>) </span>&#123;</span><br><span class="line">					cursor.toArray(<span class="function"><span class="keyword">function</span>(<span class="params">err, items</span>) </span>&#123;</span><br><span class="line">						test.assertEquals(<span class="number">1</span>, items.length);</span><br><span class="line">​</span><br><span class="line">						<span class="comment">// Let's close the db​</span></span><br><span class="line">						p_client.close();</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>You are not likely to encounter this problem often in your code, but when you do,and you will from time to time,here are two solutions to this problem. [3]</p>
<p>Name your functions and declare them and pass just the name of the function as the callback, instead of defining an anonymous function in the parameter of the main function.<br>Modularity: Separate your code into modules, so you can export a section of code that does a particular job. Then you can import that module into your larger application.</p>
<p>###Make Your Own Callback Functions<br>Now that you completely (I think you do; if not it is a quick reread :)) understand everything about JavaScript callback functions and you have seen that using callback functions are rather simple yet powerful, you should look at your own code for opportunities to use callback functions, for they will allow you to:</p>
<blockquote>
<ul>
<li>Do not repeat code (DRY—Do Not Repeat Yourself)</li>
<li>Implement better abstraction where you can have more generic functions that  are versatile (can handle all sorts of functionalities)</li>
<li>Have better maintainability</li>
<li>Have more readable code</li>
<li>Have more specialized functions.</li>
</ul>
</blockquote>
<p>It is rather easy to make your own callback functions. In the following example, I could have created one function to do all the work: retrieve the user data, create a generic poem with the data, and greet the user. This would have been a messy function with much if/else statements and, even still, it would have been very limited and incapable of carrying out other functionalities the application might need with the user data.</p>
<p>Instead, I left the implementation for added functionality up to the callback functions, so that the main function that retrieves the user data can perform virtually any task with the user data by simply passing the user’s full name and gender as parameters to the callback function and then executing the callback function.</p>
<p>In short, the getUserInput function is versatile: it can execute all sorts of callback functions with myriad of functionalities.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// First, setup the generic poem creator function; it will be the callback function in the getUserInput function below.​</span></span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">genericPoemMaker</span>(<span class="params">name, gender</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(name + <span class="string">" is finer than fine wine."</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Altruistic and noble for the modern time."</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"Always admirably adorned with the latest style."</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"A "</span> + gender + <span class="string">" of unfortunate tragedies who still manages a perpetual smile"</span>);</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="comment">//The callback, which is the last item in the parameter, will be our genericPoemMaker function we defined above.​</span></span><br><span class="line">​<span class="function"><span class="keyword">function</span> <span class="title">getUserInput</span>(<span class="params">firstName, lastName, gender, callback</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> fullName = firstName + <span class="string">" "</span> + lastName;</span><br><span class="line">​</span><br><span class="line">	<span class="comment">// Make sure the callback is a function​</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">"function"</span>) &#123;</span><br><span class="line">	<span class="comment">// Execute the callback function and pass the parameters to it​</span></span><br><span class="line">	callback(fullName, gender);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Call the getUserInput function and pass the genericPoemMaker function as a callback:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getUserInput(<span class="string">"Michael"</span>, <span class="string">"Fassbender"</span>, <span class="string">"Man"</span>, genericPoemMaker);</span><br><span class="line">​<span class="comment">// Output​</span></span><br><span class="line">​<span class="comment">/* Michael Fassbender is finer than fine wine.</span><br><span class="line">Altruistic and noble for the modern time.</span><br><span class="line">Always admirably adorned with the latest style.</span><br><span class="line">A Man of unfortunate tragedies who still manages a perpetual smile.</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure>
<p>Because the getUserInput function is only handling the retrieving of data, we can pass any callback to it. For example, we can pass a greetUser function like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greetUser</span>(<span class="params">customerName, sex</span>)  </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> salutation  = sex &amp;&amp; sex === <span class="string">"Man"</span> ? <span class="string">"Mr."</span> : <span class="string">"Ms."</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Hello, "</span> + salutation + <span class="string">" "</span> + customerName);</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// Pass the greetUser function as a callback to getUserInput​</span></span><br><span class="line">​getUserInput(<span class="string">"Bill"</span>, <span class="string">"Gates"</span>, <span class="string">"Man"</span>, greetUser);</span><br><span class="line">​</span><br><span class="line">​<span class="comment">// And this is the output​</span></span><br><span class="line">Hello, Mr. Bill Gates</span><br></pre></td></tr></table></figure>
<p>We called the same getUserInput function as we did before, but this time it performed a completely different task.</p>
<p>Note the following ways we frequently use callback functions in JavaScript:</p>
<ol>
<li>For asynchronous execution (such as reading files, and making HTTP requests)</li>
<li>In Event Listeners/Handlers</li>
<li>In setTimeout and setInterval methods</li>
<li>For Generalization: code conciseness</li>
</ol>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/09/07/javascript-prototype/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          JavaScript Prototype
        
      </div>
    </a>
  
  
    <a href="/2015/09/04/closure-in-js/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">JavaScript Closure</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>








<section id="comments">
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'sabrinajiang'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Sabrina Jiang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-65874278-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>